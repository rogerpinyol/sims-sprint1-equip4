<!DOCTYPE html>
<html lang="ca">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registre d'Usuari</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="dist/output.css">
</head>

<body class="min-h-screen flex flex-col items-center justify-center font-sans bg-fons-pagina">

  <img src="Logo EcoMotion PNG.png" alt="Logo" class="w-[200px] h-auto mb-[88px] select-none">

  <div class="rounded-3xl shadow-2xl p-6 sm:p-10 mb-20 max-w-6xl w-full bg-fons-login text-left">

    <h2
      class="text-3xl sm:text-4xl font-bold mb-8 sm:mb-10 tracking-wide drop-shadow-lg select-none text-color-titol text-center">
      Registre d'Usuari
    </h2>

    <form id="form" action="/register" method="POST" class="flex flex-col items-center"
      onsubmit="validarFormulario(event)">
      <div class="flex flex-col md:flex-row gap-4 md:gap-6 w-full justify-center mb-8">
        <div class="flex flex-col flex-1 min-w-[180px]">
          <label for="username" class="block font-bold mb-1 text-text-principal">Nom d'usuari</label>
          <input type="text" id="username" name="username"
            class="px-3 py-2 rounded border border-bordi-input bg-fons-input text-text-input focus:outline-none focus:ring-2 focus:ring-focus-input">
        </div>

        <div class="flex flex-col flex-1 min-w-[180px]">
          <label for="email" class="block font-bold mb-1 text-text-principal">Correu electrònic</label>
          <input type="email" id="email" name="email" required
            class="px-3 py-2 rounded border border-bordi-input bg-fons-input text-text-input focus:outline-none focus:ring-2 focus:ring-focus-input">
        </div>

        <div class="flex flex-col flex-1 min-w-[180px]">
          <label for="password" class="block font-bold mb-1 text-text-principal">Contrasenya</label>
          <input type="password" id="password" name="password" required
            class="px-3 py-2 rounded border border-bordi-input bg-fons-input text-text-input focus:outline-none focus:ring-2 focus:ring-focus-input">
        </div>

        <div class="flex flex-col flex-1 min-w-[180px]">
          <label for="telefono" class="block font-bold mb-1 text-text-principal">Telèfon</label>
          <input type="text" id="telefono" name="telefono" required
            class="px-3 py-2 rounded border border-bordi-input bg-fons-input text-text-input focus:outline-none focus:ring-2 focus:ring-focus-input">
        </div>

        <div class="flex flex-col flex-1 min-w-[180px]">
          <label for="dni" class="block font-bold mb-1 text-text-principal">DNI </label>
          <input type="text" id="dni" name="dni" required
            class="px-3 py-2 rounded border border-bordi-input bg-fons-input text-text-input focus:outline-none focus:ring-2 focus:ring-focus-input">
        </div>
      </div>

      <button type="submit"
        class="w-full md:w-1/2 font-bold py-2 rounded bg-color-titol text-text-principal hover:bg-color-titol-hover transition-colors mb-6">
        Registrar-se
      </button>
    </form>

    <p class="mt-2 text-center">Ja tens compte? <a href="login.html" class="text-color-enllaç hover:underline">Inicia
        sessió</a></p>
  </div>

</body>

</html>

<script>
  function validarFormulario(e) {
    e.preventDefault();

    const username = document.getElementById("username").value.trim();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();
    const telefono = document.getElementById("telefono").value.trim();

    const usernameRegex = /^[a-zA-Z]+$/;
    const emailRegex = /^[a-z0-9]+@[a-z0-9]+\.[a-z]{2,}$/;
    const telefonoRegex = /^[0-9]{9,}$/;
    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]).{8,}$/;

    if (username === "") {
      alert("El nom d'usuari és obligatori.");
      return;
    } else if (!emailRegex.test(email)) {
      alert("Introdueix un correu electrònic vàlid.");
      return;
    } else if (!passwordRegex.test(password)) {
      alert("La contrasenya ha de tenir almenys 8 caràcters, incloure majúscules, minúscules, números i caràcters especials.");
      return;
    } else if (!telefonoRegex.test(telefono)) {
      alert("Introdueix un número de telèfon vàlid (mínim 9 dígits).");
      return;
    }

    document.getElementById("form").submit();
  }
</script>